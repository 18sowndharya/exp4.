<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive CGPA Calculator</title>
  <style>
    :root {
      --bg: #f0f9ff;
      --card: #ffffff;
      --muted: #607d8b;
      --accent: #007acc;
      --error: #ff5252;
    }
    * {
      box-sizing: border-box;
      font-family: Inter, system-ui, Segoe UI, Roboto, 'Helvetica Neue', Arial;
    }
    body {
      margin: 0;
      background: var(--bg);
      color: #0f1724;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 28px;
    }
    .container {
      width: 100%;
      max-width: 900px;
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h1 {
      margin: 0 0 6px;
      font-size: 22px;
    }
    p.lead {
      margin: 0 0 18px;
      color: var(--muted);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 12px;
    }
    th, td {
      padding: 8px 10px;
      text-align: left;
    }
    thead th {
      font-size: 13px;
      color: var(--muted);
      border-bottom: 1px solid #ccc;
    }
    tbody tr {
      border-bottom: 1px dashed #ddd;
      transition: background 0.3s;
    }
    input[type=number], input[type=text] {
      background: #f9f9f9;
      border: 1px solid #ccc;
      padding: 6px 8px;
      border-radius: 6px;
      color: inherit;
      width: 100%;
      transition: border-color 0.3s;
    }
    input:invalid {
      border-color: var(--error);
    }
    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }
    button {
      background: var(--accent);
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #005fa3;
    }
    button.ghost {
      background: transparent;
      border: 1px solid #ccc;
      color: var(--accent);
    }
    .result {
      display: flex;
      gap: 16px;
      align-items: center;
    }
    .card {
      background: #f1f1f1;
      padding: 12px 14px;
      border-radius: 8px;
    }
    .small {
      font-size: 12px;
      color: var(--muted);
    }
    .actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    @media (max-width: 640px) {
      .controls {
        flex-direction: column;
      }
      .result {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Interactive CGPA Calculator</h1>
    <p class="lead">Enter each semester's credits and SGPA. Your CGPA updates instantly!</p>

    <div class="controls">
      <button id="addRow">+ Add Semester</button>
      <button id="reset" class="ghost">Reset</button>
    </div>

    <table id="semTable" aria-label="Semester table">
      <thead>
        <tr>
          <th style="width:44px">#</th>
          <th>Semester name</th>
          <th style="width:140px">Credits</th>
          <th style="width:160px">SGPA (0-10)</th>
          <th style="width:64px"></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="result">
      <div class="card">
        <div style="font-size:18px" id="cgpa">CGPA: —</div>
        <div class="small">Total Credits: <span id="totalCredits">0</span></div>
      </div>

      <div class="card">
        <div style="font-size:16px" id="percent">Percentage (approx): —</div>
        <div class="small">Formula used: CGPA × 9.5</div>
      </div>

      <div style="margin-left:auto" class="actions small">
        <div>Tip: SGPA like 8.5, credits as whole number.</div>
      </div>
    </div>
  </div>

  <script>
    const tbody = document.querySelector('#semTable tbody');
    const addRowBtn = document.getElementById('addRow');
    const resetBtn = document.getElementById('reset');
    const cgpaEl = document.getElementById('cgpa');
    const totalCreditsEl = document.getElementById('totalCredits');
    const percentEl = document.getElementById('percent');

    function createRow(name = '', credits = '', sgpa = '') {
      const tr = document.createElement('tr');
      const index = tbody.children.length + 1;
      tr.innerHTML = `
        <td>${index}</td>
        <td><input type="text" class="semName" placeholder="Semester ${index}" value="${name}"></td>
        <td><input type="number" class="credits" min="0" step="1" value="${credits}"></td>
        <td><input type="number" class="sgpa" min="0" max="10" step="0.01" value="${sgpa}"></td>
        <td><button class="del">✕</button></td>
      `;
      tbody.appendChild(tr);
      tr.querySelector('.del').addEventListener('click', () => {
        tr.remove();
        refreshIndices();
        calculate();
      });
      tr.querySelectorAll('input').forEach(input => {
        input.addEventListener('input', calculate);
      });
    }

    function refreshIndices() {
      Array.from(tbody.children).forEach((tr, i) => {
        tr.children[0].textContent = i + 1;
        tr.querySelector('.semName').placeholder = `Semester ${i + 1}`;
      });
    }

    function calculate() {
      let totalCredits = 0;
      let weightedSum = 0;
      let invalid = false;

      Array.from(tbody.querySelectorAll('tr')).forEach(tr => {
        const credits = parseFloat(tr.querySelector('.credits').value);
        const sgpa = parseFloat(tr.querySelector('.sgpa').value);
        if (Number.isFinite(credits) && Number.isFinite(sgpa)) {
          if (credits < 0 || sgpa < 0 || sgpa > 10) {
            invalid = true;
          }
          totalCredits += credits;
          weightedSum += credits * sgpa;
        }
      });

      if (invalid || totalCredits === 0) {
        cgpaEl.textContent = 'CGPA: —';
        totalCreditsEl.textContent = '0';
        percentEl.textContent = 'Percentage (approx): —';
        return;
      }

      const cgpa = weightedSum / totalCredits;
      cgpaEl.textContent = 'CGPA: ' + cgpa.toFixed(3);
      totalCreditsEl.textContent = totalCredits.toFixed(0);
      percentEl.textContent = 'Percentage (approx): ' + (cgpa * 9.5).toFixed(2) + '%';
    }

    resetBtn.addEventListener('click', () => {
      if (!confirm('Reset all semesters?')) return;
      tbody.innerHTML = '';
      createRow('Semester 1', '', '');
      createRow('Semester 2', '', '');
      calculate();
    });

    // Initialize with two rows
    createRow('Semester 1', '', '');
    createRow('Semester 2', '', '');
  </script>
</body>
</